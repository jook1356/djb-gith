// 코드 블록 컴포넌트 스타일
.codeBlock {
  position: relative;

  select {
    position: absolute;
    background-color: var(--background);
    color: var(--foreground);
    border: 1px solid var(--border);
    right: 0.5rem;
    top: 0.5rem;
    padding: 0.25rem 1.5rem 0.25rem 0.5rem;
    border-radius: 4px;
    font-size: 0.75rem;
    appearance: none;
    cursor: pointer;
    z-index: 1;
    
    &:focus {
      outline: none;
      border-color: var(--color-primary);
      box-shadow: 0 0 0 2px var(--color-primary-light);
    }
    
    &:hover {
      background-color: var(--background-secondary);
      border-color: var(--border);
    }
    
    option {
      background-color: var(--background);
      color: var(--foreground);
    }
  }
}

// Tiptap 에디터 내부 스타일
.tiptap {

  // 코드 블록 스타일
  pre {
    background: var(--background-secondary);
    border-radius: 0.5rem;
    color: var(--color-code-text);
    font-family: 'Pretendard', -apple-system, BlinkMacSystemFont, system-ui, Roboto, 'Helvetica Neue', 'Segoe UI', 'Apple SD Gothic Neo', 'Noto Sans KR', 'Malgun Gothic', 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', sans-serif;
    font-weight: 300;
    font-size: 12px;
    margin: 1.5rem 0;
    padding: 0.75rem 1rem;
    position: relative;

    code {
      background: none;
      color: inherit;
      font-size: 0.8rem;
      padding: 0;
    }

    /* Code styling - 라이트 테마용 */
    .hljs-comment,
    .hljs-quote {
      color: var(--color-text-tertiary);
      font-style: italic;
    }

    .hljs-variable,
    .hljs-template-variable,
    .hljs-attribute,
    .hljs-tag,
    .hljs-name,
    .hljs-regexp,
    .hljs-link,
    .hljs-selector-id,
    .hljs-selector-class {
      color: #dc2626; // 라이트 테마용 빨간색
    }

    .hljs-number,
    .hljs-meta,
    .hljs-built_in,
    .hljs-builtin-name,
    .hljs-literal,
    .hljs-type,
    .hljs-params {
      color: #d97706; // 라이트 테마용 오렌지색
    }

    .hljs-string,
    .hljs-symbol,
    .hljs-bullet {
      color: #059669; // 라이트 테마용 초록색
    }

    .hljs-title,
    .hljs-section {
      color: #7c3aed; // 라이트 테마용 보라색
    }

    .hljs-keyword,
    .hljs-selector-tag {
      color: #2563eb; // 라이트 테마용 파란색
    }

    .hljs-emphasis {
      font-style: italic;
    }

    .hljs-strong {
      font-weight: 700;
    }
  }
}

// 읽기전용 모드에서 언어 선택 드롭다운을 텍스트 라벨로 변경
.tiptapEditor.readonly {
  .codeBlock {
    select {
      pointer-events: none; // 클릭 비활성화
      cursor: default; // 커서 변경
      border: none; // 테두리 제거
      background: rgba(0, 0, 0, 0.1); // 반투명 배경
      color: var(--color-text-secondary); // 보조 텍스트 색상
      font-size: 0.7rem; // 폰트 크기 축소
      padding: 0.2rem 0.4rem; // 패딩 축소
      border-radius: 3px; // 모서리 둥글게
      backdrop-filter: blur(4px); // 블러 효과
      font-weight: 500; // 폰트 굵기
      text-transform: uppercase; // 대문자 변환
      letter-spacing: 0.5px; // 글자 간격
      text-align: center; // 텍스트 중앙 정렬
      
      &:hover {
        background: rgba(0, 0, 0, 0.1); // 호버 시에도 동일한 배경
        border: none;
      }
      
      &:focus {
        outline: none; // 포커스 아웃라인 제거
        border: none;
        box-shadow: none;
      }
      
      // 드롭다운 화살표 숨기기
      appearance: none;
      background-image: none;
      
      // 옵션 숨기기 (드롭다운 기능 비활성화)
      option {
        display: none;
      }
    }
  }
}

// 다크 테마에서 읽기전용 모드
[data-theme="dark"] .tiptapEditor.readonly {
  .codeBlock {
    select {
      background: rgba(255, 255, 255, 0.1); // 다크 테마용 반투명 배경
      color: var(--color-text-tertiary);
      
      &:hover {
        background: rgba(255, 255, 255, 0.1);
      }
    }
  }

  // 다크 테마 코드 블록
  pre {
    background: var(--background-secondary) !important;
    color: var(--color-code-text) !important;
    
    /* Code styling - 다크 테마용 */
    .hljs-comment,
    .hljs-quote {
      color: #8b949e;
      font-style: italic;
    }

    .hljs-variable,
    .hljs-template-variable,
    .hljs-attribute,
    .hljs-tag,
    .hljs-name,
    .hljs-regexp,
    .hljs-link,
    .hljs-selector-id,
    .hljs-selector-class {
      color: #f85149; // 다크 테마용 빨간색
    }

    .hljs-number,
    .hljs-meta,
    .hljs-built_in,
    .hljs-builtin-name,
    .hljs-literal,
    .hljs-type,
    .hljs-params {
      color: #ffa657; // 다크 테마용 오렌지색
    }

    .hljs-string,
    .hljs-symbol,
    .hljs-bullet {
      color: #7ee787; // 다크 테마용 초록색
    }

    .hljs-title,
    .hljs-section {
      color: #d2a8ff; // 다크 테마용 보라색
    }

    .hljs-keyword,
    .hljs-selector-tag {
      color: #79c0ff; // 다크 테마용 파란색
    }
  }
}
